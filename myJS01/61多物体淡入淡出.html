<!DOCTYPE html>
<!-- 多物体淡入淡出 使用多物体运动框架 -->
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Document</title>
        <style>
            div {width: 200px;height:200px;margin:20px;float:left;background: red;
            filter: alpha(opacity=30); opacity: 0.3;}
        </style>
        <script>
            window.onload=function()
            {
                var aDiv = document.getElementsByTagName("div");
                for(var i=0;i<aDiv.length;i++)
                {
                    aDiv[i].timer = null;
                    aDiv[i].alpha = 30; //物体初始透明度
                    aDiv[i].onmouseover=function()
                    {
                        //100为透明度
                        startMove(this,100);
                    }
                    aDiv[i].onmouseout=function()
                    {
                        startMove(this,30);
                    }
                }
            }
            
            function startMove(obj,iTarget)
            {
                clearInterval(obj.timer);
                obj.timer=setInterval(function(){
                    var speed = (iTarget-obj.alpha)/6;
                    //缓冲运动取整 因为要来回运动 所以要分正负
                    speed=speed>0?Math.ceil(speed):Math.floor(speed);
                    
                    if(obj.alpha==iTarget)
                    {
                        clearInterval(obj.timer);
                    }
                    else
                    {
                        obj.alpha+=speed; //alpha会变

                        obj.style.filter='alpha(opacity='+obj.alpha+')';
                        obj.style.opacity=obj.alpha/100;
                    }
                },30);
            }

        </script>
    </head>
    <body>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </body>
</html>